## mako

<%page expression_filter="h"/>

<%! import json %>
<%!
from django.utils.translation import ugettext as _
from openedx.core.djangolib.js_utils import (
    dump_js_escaped_json, js_escaped_string
)
%>

<%namespace name='static' file='/static_content.html'/>
<%inherit file="/main.html" />

<%!
from django.core.urlresolvers import reverse
from opaque_keys.edx.keys import CourseKey, UsageKey
from courseware.url_helpers import get_redirect_url
%>

<link href="${static.url('css/bootstrap.css')}" rel="stylesheet">
<link href="${static.url('css/custom_dashboard.css')}" rel="stylesheet">
<div class="container custom-dashbaord">
    <div class="login-signup">
        <div class="row">
            <div class="col-sm-12 nav-tab-holder">
                <ul class="nav nav-tabs row" role="tablist">
                    <li role="presentation" style="opacity: 0; cursor: pointer;" class="non-active col-sm-6 upcomingAssignmentsTabClick"><a href="javascript:void(0);" style="cursor: pointer;" aria-controls="home" role="tab" data-toggle="tab">Upcoming Assignment</a></li>
                    <li role="presentation" class="active col-sm-6 submittedAssignmentsTabClick"><a href="javascript:void(0);" aria-controls="profile" role="tab" data-toggle="tab">Submitted Assignment</a></li>
                </ul>
            </div>
        </div>

        <div class="tab-content">
            <div role="tabpanel" class="tab-pane submittedAssignmentsTab active" id="profile">
                <div class="row">
                    <div class="col-sm-12 mobile-pull">
                        <article role="login">
                            <div class="row">
                                <div class="col-sm-4 Coursebox">
                                    <h4>Courses</h4>
                                    <ul>
                                        % if submittedCoursesList:
                                            % for courseId ,courseName in submittedCoursesList.iteritems():
                                                <li><div class="${submittedAssignmentListColors[courseId]}1"></div><div id="${courseId}">${courseName}</div></li>
                                            % endfor
                                        % endif
                                    </ul>
                                </div>
                                <div class="col-sm-8">
                                    % for assignmentsData in submitted_assignments:
                                        <div class="box ${submittedAssignmentListColors[assignmentsData.assignment.course_id]}">
                                            <div class="row">
                                                <%
                                                    temp_usage_key = UsageKey.from_string(assignmentsData.assignment.assignment_id)
                                                    temp_course_key = CourseKey.from_string(assignmentsData.assignment.course_id)
                                                %>
                                                <div class="col-sm-6 assignmentBlockClick" rel="${get_redirect_url(temp_course_key, temp_usage_key)}">
                                                    <h6>${assignmentsData.assignment.name[assignmentsData.assignment.name.index('(')+1:assignmentsData.assignment.name.index(')')]}</h6> 
                                                    <p>${"".join(e[0] for e in submittedCoursesList[assignmentsData.assignment.course_id].split())}</p>
                                                </div><!--div-->
                                                <div class="col-sm-6">
                                                    <div class="view">
                                                        <a href="javascript:void(0)" class="viewFeedback" data-assignmentid="${assignmentsData.assignment.id}">View Feedback</a>
                                                    </div>
                                                </div><!--div-->
                                            </div><!--row-->
                                        </div><!--box-->
                                    % endfor
                                </div>
                            </div>
                        </article>
                    </div>
                </div>
                <!-- end of row -->
            </div>
        </div>
    </div>
    <div id="feeback_modal" class="modal feeback_modal fade bs-example-modal-md" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-12">
                                <h5>Assignment Name</h5>
                                <h5>Course Name</h5>
                                <h5>Due Date and Time</h5>

                                <hr>

                                <h6>Overall Feedback and Grade</h6>
                                <p>9/15</p>
                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus nisi nibh, efficitur at pulvinar in, pulvinar quis dui. Vivamus porttitor luctus purus non sodales. Donec ac mi id purus iaculis ultrices.</p>
                            </div><!--col-md-12 ends here-->

                        </div><!--row ends here-->
                    </div><!--container-fluid ends here-->
                </div>

                <div class="modal-body">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th class="learningcell">Learning Outcome</th>
                                    <th></th>
                                    <th></th>
                                    <th style="text-align: center;">Level</th>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </thead>
                            <thead>
                                <tr>
                                    <th></th>
                                    <th>1 - Beginning</th>
                                    <th>2 - Developing</th>
                                    <th>3 - Approching</th>
                                    <th>4 - Proficient</th>
                                    <th>5 - Exemplary</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr data-toggle="collapse" data-target=".order1">
                                    <td class="learningcell">Defining the problem: I can understand and contextualize a problem</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.  <em>(Read More +)</em></td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                </tr>

                                <tr class="collapse order1">
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            
                                <tr data-toggle="collapse" data-target=".order2">
                                    <td class="learningcell">Learning outcome Description</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.  <em>(Read More +)</em></td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                </tr>

                                <tr class="collapse order2">
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td></td>
                                </tr>


                                <tr data-toggle="collapse" data-target=".order3">
                                    <td class="learningcell">Learning outcome Description</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.  <em>(Read More +)</em></td>
                                </tr>

                                <tr class="collapse order3">
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                </tr>


                                <tr data-toggle="collapse" data-target=".order4">
                                    <td class="learningcell">Learning outcome Description</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.  <em>(Read More +)</em></td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                </tr>


                                <tr class="collapse order4">
                                    <td></td>
                                    <td></td>
                                    <td></td>               
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td></td>
                                    <td></td>
                                </tr>



                                <tr data-toggle="collapse" data-target=".order5">
                                    <td class="learningcell">Learning outcome Description</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.  <em>(Read More +)</em></td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                </tr>

                                <tr class="collapse order5">
                                    <td></td>
                                    <td></td>
                                    <td>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="${static.url('js/bootstrap.min.js')}"></script>
<script type="text/javascript">
    $(document).ready(function(){
        // $('.upcomingAssignmentsTabClick').on('click', function(){
        //     console.log("upcomingAssignmentsTabClick");
        //     var _this = $(this);
        //     _this.removeClass('non-active').addClass('active');
        //     $('.submittedAssignmentsTabClick').removeClass('active').addClass('non-active');
        //     $('.submittedAssignmentsTab').removeClass('active');
        //     $('.upcomingAssignmentsTab').addClass('active');
        // });
        $('.submittedAssignmentsTabClick').on('click', function(){
            console.log("submittedAssignmentsTabClick");
            var _this = $(this);
            _this.removeClass('non-active').addClass('active');
            $('.upcomingAssignmentsTabClick').removeClass('active').addClass('non-active');
            $('.upcomingAssignmentsTab').removeClass('active');
            $('.submittedAssignmentsTab').addClass('active');
        });
        $('.assignmentBlockClick').on('click', function(){
            console.log('assignmentBlockClick');
            var _this = $(this);
            location.href = _this.attr('rel');
        });

        $('.viewFeedback').on('click', function(e){
            e.preventDefault();
            var _this = $(this)
            console.log(_this.data('assignmentid'), "=assignemntid");
            var assignmentid = _this.data('assignmentid');
            if (!isNaN(assignmentid)){
                $.ajax({
                    url : '/studentfeedback',
                    method : 'POST',
                    headers: {
                      'X-CSRFToken': $.cookie('csrftoken')
                    },
                    dataType: 'json',
                    data : {
                        'assignmentid': assignmentid
                    },
                    // beforeSend:function(){
                    //     $('.loader-overlay').removeClass('dnone');
                    // },
                    success : function(response){
                        // $('.loader-overlay').addClass('dnone');
                        console.log(response,'===responsesuccss====');
                        
                    },
                    error : function(response){
                        console.log(response,'===responseerror====');
                    }
                });
            }
        });
    })
</script>